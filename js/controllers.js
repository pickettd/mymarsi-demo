"use strict";angular.module("app.controllers",[]).controller("projectsCtrl",["$scope",function(a){}]).controller("entryHallwayCtrl",["$scope","$ionicModal","$pouchDB","$log","DemoDataFactory",function(a,n,e,l,t){a.entryHallway={},a.entryHallway.newComments={},a.entryHallway.newImages={},a.entryHallway.modalSection="",e.setDatabase("mymarsi-demo-localonly"),e.get({ok:!0,id:"demoDataInspection1EntryHallwaySections"}).then(function(n){l.info("Success getting sections from local db"),a.entryHallway.sections=n})["catch"](function(n){404===n.status?(l.info("Section data not found in local database; creating"),a.entryHallway.sections=t.demoDataInspection1EntryHallwaySections,e.save(a.entryHallway.sections)["catch"](function(a){l.error(a)})):l.error(n)})["finally"](function(){a.$watch("entryHallway.sections",function(a,n){a!==n&&e.save(a).then(function(){l.info("Success saving change to db")})["catch"](function(n){409===n.status?e.retryUntilWritten(angular.copy(a)):l.error(n)})},!0)});var o=function(n){a.entryHallway.modalSection=n},r=function(){var n=0;return angular.forEach(a.entryHallway.sections[a.entryHallway.modalSection].images,function(a){n++}),n};a.entryHallway.fileNameChanged=function(n){if(a.entryHallway.filesItemHandle=n,1===n.files.length&&0===n.files[0].type.indexOf("image/")){var e=new FileReader;e.onload=function(n){var e=a.entryHallway.filesItemHandle.files[0].name;a.entryHallway.images||(a.entryHallway.images={}),a.entryHallway.sections[a.entryHallway.modalSection].images||(a.entryHallway.sections[a.entryHallway.modalSection].images={}),a.entryHallway.newImages[a.entryHallway.modalSection].src=n.target.result,a.entryHallway.newImages[a.entryHallway.modalSection].name=e,a.$apply()},e.readAsDataURL(n.files[0])}},a.entryHallway.addNewImage=function(){var n=angular.copy(a.entryHallway.newImages[a.entryHallway.modalSection]);a.entryHallway.images||(a.entryHallway.images={}),a.entryHallway.sections[a.entryHallway.modalSection].images||(a.entryHallway.sections[a.entryHallway.modalSection].images={}),n._id=r()+1,a.entryHallway.sections[a.entryHallway.modalSection].images[n._id]=n,a.entryHallway.newImages[a.entryHallway.modalSection]={},a.entryHallway.filesItemHandle.value=""},a.entryHallway.deleteImage=function(n){delete a.entryHallway.sections[a.entryHallway.modalSection].images[n]};var y=function(){var n=0;return angular.forEach(a.entryHallway.sections[a.entryHallway.modalSection].comments,function(a){n++}),n};a.entryHallway.deleteComment=function(n){delete a.entryHallway.sections[a.entryHallway.modalSection].comments[n]},a.entryHallway.createComment=function(){var n=angular.copy(a.entryHallway.newComments[a.entryHallway.modalSection]);a.entryHallway.comments||(a.entryHallway.comments={}),a.entryHallway.sections[a.entryHallway.modalSection].comments||(a.entryHallway.sections[a.entryHallway.modalSection].comments={}),n._id=y()+1,a.entryHallway.sections[a.entryHallway.modalSection].comments[n._id]=n,a.entryHallway.newComments[a.entryHallway.modalSection]={}},n.fromTemplateUrl("templates/modals/manageComments.html",{scope:a,animation:"slide-in-up",focusFirstInput:!0}).then(function(n){a.entryHallway.commentsModal=n}),a.entryHallway.openCommentsModal=function(n){o(n),a.entryHallway.newComments[a.entryHallway.modalSection]||(a.entryHallway.newComments[a.entryHallway.modalSection]={}),a.entryHallway.commentsModal.show()},a.entryHallway.closeCommentsModal=function(){a.entryHallway.commentsModal.hide()},a.$on("$destroy",function(){a.entryHallway.commentsModal.remove()}),n.fromTemplateUrl("templates/modals/manageSounds.html",{scope:a,animation:"slide-in-up"}).then(function(n){a.entryHallway.soundsModal=n}),a.entryHallway.openSoundsModal=function(n){o(n),a.entryHallway.soundsModal.show()},a.entryHallway.closeSoundsModal=function(){a.entryHallway.soundsModal.hide()},a.$on("$destroy",function(){a.entryHallway.soundsModal.remove()}),n.fromTemplateUrl("templates/modals/manageImages.html",{scope:a,animation:"slide-in-up"}).then(function(n){a.entryHallway.imagesModal=n}),a.entryHallway.openImagesModal=function(n){o(n),a.entryHallway.newImages[a.entryHallway.modalSection]||(a.entryHallway.newImages[a.entryHallway.modalSection]={}),a.entryHallway.imagesModal.show()},a.entryHallway.closeImagesModal=function(){a.entryHallway.imagesModal.hide()},a.$on("$destroy",function(){a.entryHallway.imagesModal.remove()})}]).controller("kitchenCtrl",["$scope",function(a){}]).controller("livingRoomCtrl",["$scope",function(a){}]).controller("diningRoomCtrl",["$scope",function(a){}]).controller("masterBathroomCtrl",["$scope",function(a){}]).controller("bathroom2Ctrl",["$scope",function(a){}]).controller("masterBedroomCtrl",["$scope",function(a){}]).controller("bedroom2Ctrl",["$scope",function(a){}]).controller("maintenanceCtrl",["$scope",function(a){}]).controller("factsCtrl",["$scope",function(a){}]).controller("homeCtrl",["$scope",function(a){}]).controller("adminCtrl",["$scope",function(a){}]).controller("lanaiCtrl",["$scope",function(a){}]);