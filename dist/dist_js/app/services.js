"use strict";angular.module("app.services",[]).factory("$pouchDB",["pouchDB","$log",function(t,n){var e=null,r={};return window.PouchDB.plugin(window.List),r.setDatabase=function(r){try{e=t(r,{auto_compaction:!0,adapter:"idb"})}catch(u){try{e=t(r,{auto_compaction:!0,adapter:"fruitdown"})}catch(c){try{e=t(r,{auto_compaction:!0})}catch(i){n.error(i)}}}e.info().then(function(t){n.info(t)})["catch"](function(t){n.error(t)})},r.replicate=function(t,n){return window.PouchDB.replicate(t,n,{live:!0,retry:!0,batch_size:1,timeout:1e5})},r.sync=function(t){return e.sync(t,{live:!0,retry:!0,batch_size:2})},r.get=function(t){return t.ok?e.get(t.id):n.error(t)},r.getAttachment=function(t,n){return e.getAttachment(t,n)},r.putAttachment=function(t,n,r,u,c){return e.putAttachment(t,n,r,u,c)},r.getRevAndPutAttachment=function(t,u,c,i){return e.get(t).then(function(n){return r.putAttachment(t,u,n._rev,c,i)})["catch"](function(e){if(404===e.status)return r.putAttachment(t,u,void 0,c,i);throw n.error(e),e})},r.list=function(t,n){return void 0!==n?e.list(t,{query:{include_docs:!0,key:n}}):e.list(t,{query:{include_docs:!0}})},r.query=function(t,n,r){var u=!1;return void 0!==n&&(u=n),void 0!==r?e.query(t,{include_docs:u,key:r}):e.query(t,{include_docs:u})},r.getAll=function(t){return e.allDocs({include_docs:t})},r.save=function(t){return t._id?e.put(t):e.post(t)},r.retryUntilWritten=function(t){return e.get(t._id).then(function(n){return t._rev=n._rev,e.put(t)})["catch"](function(n){return 409===n.status?r.retryUntilWritten(t):e.put(t)})},r["delete"]=function(t,n){return e.remove(t,n)},r.destroy=function(){return e.destroy()},r}]).service("BlankService",[function(){}]);